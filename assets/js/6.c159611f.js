(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{251:function(t,e,a){t.exports=a.p+"assets/img/code_meme.70a0a5b9.jpg"},252:function(t,e,a){t.exports=a.p+"assets/img/move-the-thing.d65505af.jpg"},267:function(t,e,a){"use strict";a.r(e);var s=a(28),n=Object(s.a)({},(function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h1",{attrs:{id:"pack-for-the-journey"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#pack-for-the-journey"}},[t._v("#")]),t._v(" Pack for the Journey")]),t._v(" "),s("blockquote",[s("p",[t._v("This article is about travelling down the road of automating the building and publishing of your "),s("strong",[t._v("NuGet packages")]),t._v(" on GitHub through "),s("strong",[t._v("GitHub Actions")]),t._v(" in 2020.")])]),t._v(" "),s("p",[t._v("As you get further along your journey of learning to code, it's not unusual to find yourself writing the same code over and over for different projects. At that point, you may be thinking \"I need to put all this commonly used code in a "),s("strong",[t._v("library")]),t._v(" that I can reuse.\" After all, you've used libraries othes have made, so why not make your own!")]),t._v(" "),s("p",[t._v("In the world of C# programming, these re-usable libraries are shared and consumes as "),s("strong",[t._v("NuGet")]),t._v(" packages. And, if you are using version control, you've probably stumbled upon git and GitHub. You might have even heard somewhere that GitHub has its own "),s("strong",[t._v("Package Registry")]),t._v(" for NuGet packages.")]),t._v(" "),s("p",[t._v("This article is about travelling down the road of automating the building and publishing of your NuGet packages on GitHub. I'll be your guide, so get ready and "),s("a",{attrs:{href:"#pack-for-the-journey"}},[t._v('"Pack for the Journey"')]),t._v("!")]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"my-learning"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#my-learning"}},[t._v("#")]),t._v(" My Learning")]),t._v(" "),s("p",[s("img",{attrs:{src:a(251),alt:""}})]),t._v(" "),s("ul",[s("li",[s("input",{attrs:{type:"checkbox",id:"checkbox4"}}),s("label",{attrs:{for:"checkbox4"}},[t._v("Try the ")]),s("a",{attrs:{href:"https://lab.github.com/githubtraining/github-actions:-publish-to-github-packages",target:"_blank",rel:"noopener noreferrer"}},[t._v("Learning Lab"),s("OutboundLink")],1)]),t._v(" "),s("li",[s("input",{attrs:{type:"checkbox",id:"checkbox5"}}),s("label",{attrs:{for:"checkbox5"}}),s("strong",[t._v("Read")]),t._v(" "),s("a",{attrs:{href:"https://blog.hildenco.com/2020/07/hosting-nuget-packages-on-github.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Hosting NuGet Packages on GitHub"),s("OutboundLink")],1)])]),t._v(" "),s("hr"),t._v(" "),s("h2",{attrs:{id:"take-aways"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#take-aways"}},[t._v("#")]),t._v(" Take-Aways")]),t._v(" "),s("blockquote",[s("p",[t._v('"Move the thing! Grab the thing - and the other thing."')]),t._v(" "),s("p",[s("img",{attrs:{src:a(252),alt:"Princess Bride Scene"}})])]),t._v(" "),s("p",[t._v("When publishing NuGet packages for your .Net project on GitHub, it's important to make some distinctions:")]),t._v(" "),s("ul",[s("li",[t._v("A "),s("code",[t._v(".nupkg")]),t._v(" is a "),s("strong",[t._v("file")]),t._v(" that contains information about what is in the package")]),t._v(" "),s("li",[t._v("A "),s("strong",[t._v("Package Registry")]),t._v(" is a centralized location that lists your packages. There are package registries for various systems besides .NET (such as "),s("em",[t._v("npm")]),t._v(" package registries). When you want to add a NuGet package to your project, you typically look in a "),s("em",[t._v("nuget package registry")]),t._v(". There are serveral popular NuGet package registries.\n"),s("ul",[s("li",[t._v("Nuget")]),t._v(" "),s("li",[t._v("GitHub")]),t._v(" "),s("li",[t._v("others")])])]),t._v(" "),s("li",[s("strong",[t._v("GitHub Actions")])])]),t._v(" "),s("h2",{attrs:{id:"the-old-days"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#the-old-days"}},[t._v("#")]),t._v(' The "Old" Days')]),t._v(" "),s("p",[t._v("Back when NuGet was a new thing in the .NET world, you typically wound up publishing your libraries directly to NuGet. It involved a lot of manual processes.")]),t._v(" "),s("ul",[s("li",[t._v("Build your project")]),t._v(" "),s("li",[t._v("Create a "),s("code",[t._v(".nupkg")])]),t._v(" "),s("li",[t._v("Post it to Nuget.com")])]),t._v(" "),s("p",[t._v("All along the way, you had to make sure you were paying attention to your "),s("strong",[t._v("version numbers")]),t._v(" for your project "),s("em",[t._v("and")]),t._v(' your package. Forget that, and your newly published package may be "'),s("a",{attrs:{href:"https://www.urbandictionary.com/define.php?term=Pooched",target:"_blank",rel:"noopener noreferrer"}},[t._v("pooched"),s("OutboundLink")],1),t._v('".')]),t._v(" "),s("div",{staticClass:"language-yml extra-class"},[s("pre",{pre:!0,attrs:{class:"language-yml"}},[s("code",[s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Publish NuGet Package to GitHub Registry\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("push")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("branches")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" master "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# or main - Default release branch")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("jobs")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n  "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("publish")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" build"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" pack & publish\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("runs-on")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" windows"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("latest\n    "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("steps")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("uses")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" actions/checkout@v2\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Add GitHub as NuGet source\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dotnet nuget add source https"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("//nuget.pkg.github.com/dgilleland/index.json "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("n github\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Build Solution\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dotnet build src\\FreeCode.Exceptions\\FreeCode.Exceptions.csproj "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("c Release\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## Include the following if your .csproj does not automatically generate the .nupkg")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# - name: Create Release package")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#   run: dotnet pack src\\FreeCode.Exceptions\\FreeCode.Exceptions.csproj -c Release -o out")]),t._v("\n      "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("name")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" Publish package\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("env")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n          "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("GITHUB_TOKEN")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" $"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" secrets.GITHUB_TOKEN "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),s("span",{pre:!0,attrs:{class:"token key atrule"}},[t._v("run")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" dotnet nuget push src\\FreeCode.Exceptions\\bin\\Release\\FreeCode.Exceptions.0.1.0.nupkg "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v('source "github" '),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("skip"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("duplicate "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("api"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("-")]),t._v("key $env"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("GITHUB_TOKEN\n")])])])])}),[],!1,null,null,null);e.default=n.exports}}]);